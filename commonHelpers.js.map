{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41701983-23ca5d5908e2c78927e8095f2';\n\nconst lightbox = new SimpleLightbox('.gallery-item');\n\nconst getBaseUrl = () => {\n  const url = new URL(BASE_URL);\n  url.searchParams.append('key', API_KEY);\n  url.searchParams.append('image_type', 'photo');\n  url.searchParams.append('orientation', 'horizontal');\n  url.searchParams.append('safesearch', true);\n\n  return url;\n};\n\nconst fetchImg = query => {\n  const url = getBaseUrl();\n  url.searchParams.append('q', query);\n\n  return fetch(url)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(`HTTP error! Status: ${res.status}`);\n      }\n      return res.json();\n    })\n    .then(data => data.hits)\n    .catch(error => {\n      console.error(`Error fetching images:`, error);\n      throw error;\n    });\n};\n\nconst renderGallery = images => {\n  const galleryContainer = document.getElementById('gallery');\n  galleryContainer.innerHTML = '';\n\n  images.forEach(image => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = image;\n    galleryContainer.insertAdjacentHTML(\n      'beforeend',\n      `\n    <li class=\"gallery-item\">\n    <a href=\"${largeImageURL}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n    <a/>\n    <p>Likes: ${likes}<p/>\n    <p>view: ${views}<p/>\n    <p>comments: ${comments}<p/>\n    <p>downloads: ${downloads}<p/>\n    </li>\n    `\n    );\n  });\n\n  lightbox.refresh();\n};\n\nlet loader = document.getElementById('loader');\nlet searchButton = document.getElementById('search-button');\n\nconst showLoadingIndicator = () => {\n  loader.style.display = 'block';\n\n  searchButton.disabled = true;\n};\n\nconst hideLoadingIndicator = () => {\n  loader.style.display = 'none';\n\n  searchButton.disabled = false;\n};\n\nconst showMessage = (message, type = 'info') => {\n  iziToast[type]({\n    title: message,\n    position: 'topCenter',\n  });\n};\n\nconst handleSearсhFormSubmit = event => {\n  event.preventDefault();\n\n  const searchInput = document.getElementById('search-input');\n  const query = searchInput.value.trim();\n\n  if (query.length < 3) {\n    showMessage('Please enter a search query', 'warning');\n    return;\n  }\n\n  showLoadingIndicator();\n\n  fetchImg(query)\n    .then(images => {\n      hideLoadingIndicator();\n      if (images.length > 0) {\n        renderGallery(images);\n      } else {\n        showMessage(\n          'Sorry, there are no images matching your search query. Please try again.',\n          'error'\n        );\n      }\n    })\n    .catch(error => {\n      hideLoadingIndicator();\n      showMessage('Error fetching images. Pease try again later.', 'error');\n    });\n};\n\nconst searchForm = document.getElementById('form');\nsearchForm.addEventListener('submit', handleSearсhFormSubmit);\n\n// const url = getBaseUrl();\n// url.searchParams.append(\"q\", \"query\");\n\n// fetch(url)\n//   .then(res => res.json())\n//   .then(images => {\n//     document.body.insertAdjacentHTML(\"beforeend\", `\n//     <img src=\"${images.hits[0].largeImageURL}\"/>\n//     `)\n//   })\n"],"names":["BASE_URL","API_KEY","lightbox","SimpleLightbox","getBaseUrl","url","fetchImg","query","res","data","error","renderGallery","images","galleryContainer","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loader","searchButton","showLoadingIndicator","hideLoadingIndicator","showMessage","message","type","iziToast","handleSearсhFormSubmit","event","searchForm"],"mappings":"6vBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAW,IAAIC,EAAe,eAAe,EAE7CC,EAAa,IAAM,CACvB,MAAMC,EAAM,IAAI,IAAIL,CAAQ,EAC5B,OAAAK,EAAI,aAAa,OAAO,MAAOJ,CAAO,EACtCI,EAAI,aAAa,OAAO,aAAc,OAAO,EAC7CA,EAAI,aAAa,OAAO,cAAe,YAAY,EACnDA,EAAI,aAAa,OAAO,aAAc,EAAI,EAEnCA,CACT,EAEMC,EAAWC,GAAS,CACxB,MAAMF,EAAMD,IACZ,OAAAC,EAAI,aAAa,OAAO,IAAKE,CAAK,EAE3B,MAAMF,CAAG,EACb,KAAKG,GAAO,CACX,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,uBAAuBA,EAAI,QAAQ,EAErD,OAAOA,EAAI,MACjB,CAAK,EACA,KAAKC,GAAQA,EAAK,IAAI,EACtB,MAAMC,GAAS,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACZ,CAAK,CACL,EAEMC,EAAgBC,GAAU,CAC9B,MAAMC,EAAmB,SAAS,eAAe,SAAS,EAC1DA,EAAiB,UAAY,GAE7BD,EAAO,QAAQE,GAAS,CACtB,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJD,EAAiB,mBACf,YACA;AAAA;AAAA,eAESG;AAAA,kBACGD,WAAsBE;AAAA;AAAA,gBAExBC;AAAA,eACDC;AAAA,mBACIC;AAAA,oBACCC;AAAA;AAAA,KAGpB,CACA,CAAG,EAEDnB,EAAS,QAAO,CAClB,EAEA,IAAIoB,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAe,SAAS,eAAe,eAAe,EAE1D,MAAMC,EAAuB,IAAM,CACjCF,EAAO,MAAM,QAAU,QAEvBC,EAAa,SAAW,EAC1B,EAEME,EAAuB,IAAM,CACjCH,EAAO,MAAM,QAAU,OAEvBC,EAAa,SAAW,EAC1B,EAEMG,EAAc,CAACC,EAASC,EAAO,SAAW,CAC9CC,EAASD,GAAM,CACb,MAAOD,EACP,SAAU,WACd,CAAG,CACH,EAEMG,EAAyBC,GAAS,CACtCA,EAAM,eAAc,EAGpB,MAAMxB,EADc,SAAS,eAAe,cAAc,EAChC,MAAM,KAAI,EAEpC,GAAIA,EAAM,OAAS,EAAG,CACpBmB,EAAY,8BAA+B,SAAS,EACpD,MACD,CAEDF,IAEAlB,EAASC,CAAK,EACX,KAAKK,GAAU,CACda,IACIb,EAAO,OAAS,EAClBD,EAAcC,CAAM,EAEpBc,EACE,2EACA,OACV,CAEA,CAAK,EACA,MAAMhB,GAAS,CACde,IACAC,EAAY,gDAAiD,OAAO,CAC1E,CAAK,CACL,EAEMM,EAAa,SAAS,eAAe,MAAM,EACjDA,EAAW,iBAAiB,SAAUF,CAAsB"}